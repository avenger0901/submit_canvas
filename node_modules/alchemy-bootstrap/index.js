#!/usr/bin/env node
const fs = require('fs-extra');
const child_process = require('child_process')

fs.copy(`${__dirname}/copyables`, process.cwd(), err => {
    if (err) return console.error(err);
    console.log('bootstrap success!');
});


const makeGitHook = () => fs.copy(`${__dirname}/pre-push`, `${process.cwd()}/.git/hooks/pre-push`, err => {
    if (err) return console.error(err);
    child_process.exec('chmod 766 .git/hooks/pre-push')
    console.log('githook success!');
});

fs.exists(`${process.cwd()}/.git`, (exists) => {
    if (!exists) {
        child_process.exec('git init', makeGitHook);
    } else {
        makeGitHook();
    }
})

